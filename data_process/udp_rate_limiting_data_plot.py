import matplotlib.pyplot as plt
import numpy as np
import csv


def plot_throughput_loss(x, ya1, ya2, yb1, yb2, title, type1, type2):
    fig = plt.figure()
    ax1 = fig.add_subplot()


    ax1.plot(x, ya1, label=type1)
    ax1.plot(x, ya2, label=type2)
    ax1.set_xlabel("time(s)", fontweight='bold', fontsize=14)
    ax1.set_ylabel("throughput(Mbits/sec)", fontweight='bold', fontsize=14)
    ax1.set_ylim(0, 10)
    ax1.tick_params('y')
    ax1.legend(loc='upper left', title='throughput', frameon=False)

    ax2 = ax1.twinx()
    ax2.plot(x, yb1, linestyle='dotted', label=type1)
    ax2.plot(x, yb2, linestyle='dotted', label=type2)
    ax2.set_ylabel("lost(%)", fontweight='bold', fontsize=14)
    ax2.set_ylim(0, 105)
    ax2.tick_params('y')
    ax2.legend(loc='upper right', title='lost', frameon=False)

    plt.title(title, fontweight='bold', fontsize=14)

    # plt.show()
    
    save_path = '/home/mininet/Desktop/' + title + '.eps'
    plt.savefig(save_path, format='eps')


def plot_case_0x00_id_0():
    #15&35
    x = np.arange(1,31,1)
    ya1 = [5.26,2.68,1.82,1.71,1.76,1.63,1.74,1.61,1.63,1.71,
           1.71,1.69,1.79,1.82,1.89,1.88,1.67,1.74,1.75,1.66,
           1.72,1.76,1.66,1.72,1.71,1.62,1.79,1.71,1.69,1.74]
    ya2 = [4.96,3.26,3.23,3.25,3.26,3.32,3.26,3.40,3.32,3.20,
           3.16,3.26,3.08,3.14,3.22,3.26,3.22,3.26,3.29,3.27,
           3.27,3.23,3.30,3.30,3.21,3.41,3.22,3.27,3.23,3.23]
    yb1 = [0,49,65,67,67,68,68,69,69,67,
           68,67,66,65,64,64,68,67,66,69,
           67,67,68,68,67,69,67,67,68,66]
    yb2 = [5.8,38,38,38,38,37,38,35,36,39,
           37,40,38,41,40,39,38,39,38,37,
           38,38,38,36,39,35,39,38,38,39]
    
    plot_throughput_loss(x, ya1, ya2, yb1, yb2, title='0x00_0',
                         type1='mice flow(5M)', type2='elephant flow(5M)')


def plot_case_0x00_id_1():
    # 17&37
    x = np.arange(1,31,1)
    ya1 = [5.26,3.14,2.61,2.43,2.63,2.46,2.47,2.50,2.45,2.39,
           2.27,2.34,2.40,2.45,2.39,2.48,2.46,2.47,2.47,2.41,
           2.39,2.46,2.36,2.56,2.58,2.33,2.61,2.30,2.34,2.50]
    ya2 = [4.89,2.60,2.45,2.46,2.39,2.54,2.41,2.62,2.49,2.60,
           2.79,2.52,2.62,2.53,2.60,2.47,2.54,2.49,2.58,2.49,
           2.55,2.53,2.60,2.43,2.42,2.65,2.40,2.72,2.58,2.40]
    
    yb1 = [0,40,51,52,50,53,53,52,54,54,
           57,55,54,53,54,53,53,53,53,54,
           54,53,55,51,51,56,51,55,55,52]
    yb2 = [7.1,50,53,54,54,52,54,50,52,51,
           47,52,50,52,51,52,53,51,51,52,
           51,52,50,54,54,49,54,48,51,54]
    
    plot_throughput_loss(x, ya1, ya2, yb1, yb2, title='0x00_1',
                         type1='mice flow(5M)', type2='elephant flow(5M)')


def plot_case_0x01_id_0():
    # 28&48
    x = np.arange(1,31,1)
    ya1 = [8.40,4.17,4.00,4.03,4.09,4.00,4.01,4.01,4.09,4.05,
           3.95,4.00,3.99,4.19,3.93,4.01,4.02,4.08,4.12,3.99,
           4.01,4.13,4.14,4.02,4.02,4.02,4.13,4.14,4.12,3.97]
    ya2 = [1.8,941,1.02,870,906,1.03,929,870,941,964,
           1.06,988,894,894,1005,964,858,906,988,917,
           988,776,917,941,953,882,835,882,894,1.02]

    for i, item in enumerate(ya2):
        if item > 10:
            ya2[i] /= 1024

    yb1 = [0,50,52,52,51,52,52,52,51,52,
           53,52,53,50,53,52,52,51,51,52,
           52,51,51,52,52,52,51,51,51,53]
    yb2 = [15,55,51,58,57,50,56,58,56,54,
           50,53,58,56,50,54,59,57,54,56,
           53,63,56,56,54,58,60,58,57,53]
    
    plot_throughput_loss(x, ya1, ya2, yb1, yb2, title='0x01_0', 
                         type1='mice flow(8M)', type2='elephant flow(2M)')


def plot_case_0x01_id_1():
    # 26&46
    x = np.arange(1,31,1)
    ya1 = [8.41,4.32,4.16,4.26,4.12,4.15,4.10,4.14,4.19,4.23,
           4.25,4.17,4.02,4.19,4.09,4.30,4.14,4.10,4.16,4.26,
           4.16,4.42,4.21,4.39,4.30,4.29,4.22,4.15,4.29,4.19]
    ya2 = [1.72,811,753,788,906,776,858,823,788,741,
           800,847,906,823,753,717,823,953,706,823,
           623,753,694,564,635,776,764,800,776,717]

    for i, item in enumerate(ya2):
        if item > 10:
            ya2[i] /= 1024

    yb1 = [0,49,50,49,51,51,51,51,50,50,
           49,50,52,50,51,49,51,51,50,49,
           50,47,50,48,49,49,50,50,49,50]
    yb2 = [20,62,63,62,58,62,59,61,63,66,
           60,59,57,62,63,66,61,54,66,61,
           70,63,67,74,68,63,64,62,63,66]
    
    plot_throughput_loss(x, ya1, ya2, yb1, yb2, title='0x01_1',
                         type1='mice flow(8M)', type2='elephant flow(2M)')

def plot_case_0x02_id_0():
    # 26&46
    x = np.arange(1,31,1)
    ya1 = [2.11,894,447,459,365,365,329,294,365,318,
           306,341,400,376,329,412,365,517,353,318,
           423,353,329,423,400,541,412,400,318,318]
    ya2 = [8.02,4.59,4.53,4.54,4.55,4.66,4.70,4.70,4.60,4.66,
           4.66,4.56,4.68,4.61,4.62,4.53,4.54,4.53,4.69,4.63,
           4.53,4.61,4.67,4.54,4.54,4.49,4.55,4.63,4.66,4.61]

    for i, item in enumerate(ya1):
        if item > 10:
            ya1[i] /= 1024

    yb1 = [0,59,78,78,82,83,84,86,82,85,
           86,83,81,83,84,79,83,74,85,83,
           81,83,84,81,80,75,80,80,85,85]
    yb2 = [4.6,45,46,46,46,45,44,44,45,45,
           44,46,44,45,45,46,46,46,44,45,
           46,45,44,46,46,46,46,45,44,45]
    
    plot_throughput_loss(x, ya1, ya2, yb1, yb2, title='0x02_0',
                         type1='mice flow(2M)', type2='elephant flow(8M)')

def plot_case_0x02_id_1():
    # 28&48
    x = np.arange(1,31,1)
    ya1 = [2.11,1.08,553,706,2.09,2.11,2.09,2.09,2.11,2.09,
           2.09,2.11,2.09,2.09,2.11,2.09,2.09,2.11,2.09,2.09,
           2.11,2.09,2.09,2.11,2.09,2.09,2.11,2.09,2.09,2.11]
    for i, item in enumerate(ya1):
        if item > 10:
            ya1[i] /= 1024
    
    ya2 = [7.97,4.41,4.34,3.54,2.48,2.49,2.48,2.49,2.49,2.48,
           2.49,2.48,2.49,2.49,2.48,2.49,2.49,2.48,2.49,2.49,
           2.48,2.49,2.49,2.48,2.49,2.49,2.48,2.49,2.49,2.48]

    yb1 = np.zeros(30)
    yb1[1] = 50
    yb1[2] = 73
    yb1[3] = 66
    yb2 = np.zeros(30)
    yb2[0] = 5.3
    yb2[1] = 47
    yb2[2] = 48
    yb2[3] = 58
    for i in range(4,30):
        yb2[i] = 70

    plot_throughput_loss(x, ya1, ya2, yb1, yb2, title='0x02_1',
                         type1='mice flow(2M)', type2='elephant flow(8M)')

if __name__ == '__main__':
    plt.rc('font', family='Times New Roman') 
    plt.rc('font', weight='bold')
    plt.rc('font', size=14)
    plot_case_0x00_id_0()
    plot_case_0x00_id_1()
    plot_case_0x01_id_0()
    plot_case_0x01_id_1()
    plot_case_0x02_id_0()
    plot_case_0x02_id_1()

    pass